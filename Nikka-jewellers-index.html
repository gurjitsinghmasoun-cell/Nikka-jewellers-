<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Nikka Jewellers</title>

<style>
body{
  font-family: Arial;
  background:#fff8e1;
  padding:20px;
}
.box{
  max-width:780px;
  margin:auto;
  background:#fff;
  padding:20px;
}
.header{
  text-align:center;
  border-bottom:2px solid #d4af37;
  padding-bottom:10px;
  margin-bottom:15px;
}
.header h1{color:#b8860b;margin:5px}
.header p{margin:2px;font-size:13px}

label{font-weight:bold;margin-top:8px;display:block}
input{width:100%;padding:6px;margin-top:4px}
button{margin-top:10px;padding:8px;width:100%;cursor:pointer}

table{width:100%;border-collapse:collapse;margin-top:10px}
th,td{border:1px solid #000;padding:6px;text-align:center;font-size:13px}

.invoice{display:none;margin-top:20px}
.footer{text-align:center;margin-top:15px;font-weight:bold}

@media print{
  .no-print{display:none}
  body{background:white}
  .invoice{display:block}
}
</style>
</head>

<body>
<div class="box">

<!-- ================= FORM (SCREEN ONLY) ================= -->
<div class="no-print">

<div class="header">
  <h1>NIKKA JEWELLERS</h1>
  <p>ONE GRAM GOLD, Hallmark Silver Jewellery, Bangles by Nikka</p>
  <p>Gold Jewellery 22 Karat te Hallmark Order te Tiyar Kire Jande.</p>
  <p>GALI NO. 5, CHIMNI ROAD, SHIMLAPURI, LUDHIANA</p>
  <p>üìû 70093-41033 | 98882-79156 | 80544-34007</p>
</div>

<label>Customer Name</label>
<input id="customer">

<label>Customer Mobile (WhatsApp)</label>
<input id="mobile">

<hr>

<label>Item Name</label>
<input id="item">

<label>Net Weight (gm)</label>
<input id="weight" type="number" step="0.001">

<label>Polish %</label>
<input id="polish" type="number" step="0.01">

<label>Gold Rate (‚Çπ / gm)</label>
<input id="rate" type="number">

<label>Making %</label>
<input id="making" type="number" step="0.01">

<button onclick="addItem()">‚ûï Add Item</button>

<table>
<thead>
<tr>
  <th>Item</th>
  <th>Final Wt</th>
  <th>Amount (‚Çπ)</th>
</tr>
</thead>
<tbody id="preview"></tbody>
</table>

<button onclick="generateInvoice()">üßæ Generate Invoice</button>
<button onclick="window.print()">üñ®Ô∏è Print / Save PDF</button>
<button onclick="sendWhatsApp()">üì≤ WhatsApp</button>
<button onclick="sendEmail()">üìß Email</button>

</div>

<!-- ================= INVOICE (PRINT ONLY) ================= -->
<div class="invoice" id="invoice">

<div class="header">
  <h1>NIKKA JEWELLERS</h1>
  <p>ONE GRAM GOLD, Hallmark Silver Jewellery, Bangles by Nikka</p>
  <p>Gold Jewellery 22 Karat te Hallmark Order te Tiyar Kire Jande.</p>
  <p>GALI NO. 5, CHIMNI ROAD, SHIMLAPURI, LUDHIANA</p>
  <p>üìû 70093-41033 | 98882-79156 | 80544-34007</p>
</div>

<div id="invDetails"></div>

<table>
<thead>
<tr>
  <th>Item</th>
  <th>Net Wt (gm)</th>
  <th>Polish Added Wt (gm)</th>
  <th>Final Wt (gm)</th>
  <th>Rate</th>
  <th>Making Amt (‚Çπ)</th>
  <th>Amount (‚Çπ)</th>
</tr>
</thead>
<tbody id="invItems"></tbody>
</table>

<div id="grandTotal" style="margin-top:10px;font-weight:bold"></div>

<div class="footer">Manpreet Jeweler's wala</div>

</div>

</div>

<script>
let items=[];
let invoiceNo=1;

function n(v){ return parseFloat(v) || 0; }

function addItem(){
  if(!item.value || !weight.value || !rate.value){
    alert("Please fill Item, Weight and Gold Rate");
    return;
  }

  let net=n(weight.value),
      p=n(polish.value),
      r=n(rate.value),
      m=n(making.value);

  let polishWt = net * p / 100;
  let finalWt = net + polishWt;
  let goldValue = finalWt * r;
  let makingAmt = goldValue * m / 100;
  let totalAmt = goldValue + makingAmt;

  let obj={
    name:item.value,
    net,
    polishWt,
    finalWt,
    rate:r,
    makingAmt,
    totalAmt
  };

  items.push(obj);

  preview.innerHTML+=`
    <tr>
      <td>${obj.name}</td>
      <td>${obj.finalWt.toFixed(3)}</td>
      <td>${obj.totalAmt.toFixed(2)}</td>
    </tr>`;

  item.value=weight.value=polish.value=making.value="";
}

function generateInvoice(){
  if(items.length===0){
    alert("Add at least one item");
    return;
  }

  let date=new Date().toLocaleString();
  invDetails.innerHTML=`
    <b>Invoice No:</b> NJ-${invoiceNo++}<br>
    <b>Date:</b> ${date}<br>
    <b>Customer:</b> ${customer.value}<br>
    <b>Mobile:</b> ${mobile.value}
    <hr>`;

  invItems.innerHTML="";
  let grand=0;

  items.forEach(i=>{
    grand+=i.totalAmt;
    invItems.innerHTML+=`
      <tr>
        <td>${i.name}</td>
        <td>${i.net.toFixed(3)}</td>
        <td>+${i.polishWt.toFixed(3)}</td>
        <td>${i.finalWt.toFixed(3)}</td>
        <td>${i.rate}</td>
        <td>${i.makingAmt.toFixed(2)}</td>
        <td>${i.totalAmt.toFixed(2)}</td>
      </tr>`;
  });

  grandTotal.innerHTML="GRAND TOTAL: ‚Çπ"+grand.toFixed(2);
  document.getElementById("invoice").style.display="block";
}

function sendWhatsApp(){
  if(!mobile.value){
    alert("Enter mobile number");
    return;
  }
  let total=items.reduce((s,i)=>s+i.totalAmt,0).toFixed(2);
  let msg=`Invoice from Nikka Jewellers%0ATotal Amount: ‚Çπ${total}`;
  window.open(`https://wa.me/91${mobile.value}?text=${msg}`);
}

function sendEmail(){
  let email=prompt("Enter customer email");
  if(!email)return;
  let total=items.reduce((s,i)=>s+i.totalAmt,0).toFixed(2);
  window.location=`mailto:${email}?subject=Invoice from Nikka Jewellers&body=Total Amount: ‚Çπ${total}`;
}
</script>

</body>
</html>
